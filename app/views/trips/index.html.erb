<div class="container my-5">
  <h1 class="text-center mb-4">Welcome, <%= current_user.email %>!</h1>

  <!-- Total Spending -->
  <div class="alert alert-primary text-center">
    Total Spent Across All Trips:
    <strong>
      $<%= @trips.sum { |t| t.expenses.where(payer_name: current_user.email).sum(:amount) }.round(2) %>
    </strong>
  </div>

  <!-- Trip List -->
  <h3 class="mb-3">Your Trips</h3>
  <% if @trips.any? %>
    <div class="list-group mb-4">
      <% @trips.each do |trip| %>
        <a href="<%= trip_path(trip) %>" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <div>
            <strong><%= trip.name %></strong><br>
            <small><%= trip.start_date %> â€“ <%= trip.end_date %></small>
          </div>
          <span class="badge bg-success rounded-pill">
            $<%= trip.expenses.where(payer_name: current_user.email).sum(:amount).round(2) %>
          </span>
        </a>
      <% end %>
    </div>
  <% else %>
    <p>You haven't created any trips yet.</p>
  <% end %>

  <%= link_to "Create New Trip", new_trip_path, class: "btn btn-success" %>
</div>
